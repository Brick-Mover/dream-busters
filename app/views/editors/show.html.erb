<head>
  <%= include_gon %>
</head>

<h1>Code Docs</h1>

<%= stylesheet_link_tag 'custom', media: 'all' %>
<!--include themes you want to use here-->
<% javascript_include_tag 'ace/theme-twilight.js' %>
<% javascript_include_tag 'ace/mode-c_cpp.js' %>
<% javascript_include_tag 'ace/mode-javascript.js' %>
<% javascript_include_tag "show" %>

<div class="row show-grid">
  <div class="col-md-8" style="min-height: 594px;">
    <div class="ace" id="ace"></div>
  </div>

  <div class="col-lg-4">

    <div class="form-group">
      <label for="pl">Select list:</label>
      <select class="form-control" id="pl">
        <option>Javascript</option>
        <option>C/C++</option>
        <option>Ruby</option>
        <option>Python</option>
      </select>
    </div>

    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Active User</h3>
      </div>
      <div class="panel-body" id="active_users">
        <div class="row show-grid">
    		<ul id="active_users_list"></ul>
        </div>
      </div>

      <div class="panel-footer">
        Panel Footer
      </div>
    </div>

    <div class="chat-panel panel panel-default">
      <div class="panel-heading">
        <i class="glyphicon glyphicon-comment"></i> Chat
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body fixed-panel">
        <ul class="chat">
          <div id="messages">
            <% unless @messages.blank? %>
                <%= render @messages %>
            <% end %>
          </div>
        </ul>
      </div>
      <!-- /.panel-body -->
      <div class="panel-footer">
        <div class="input-group">
          <input id="chat" type="text" class="form-control input-sm" data-behavior="room_speaker" placeholder="Type your message here..." />
          <span class="input-group-btn">
            <button class="btn btn-warning btn-sm" id="btn-chat" data-behavior="room_speaker_enter">
              Send
            </button>
          </span>
        </div>
      </div>
      <!-- /.panel-footer -->
    </div>
    <!-- /.panel .chat-panel -->
  </div>
</div>

<script>
  $('#pl').change(function () {
    var selectedPl = $(this).find("option:selected").text();
    var container = document.getElementById('ace');
    var aceEditor = ace.edit(container);
    console.log(selectedPl);
    if (selectedPl == "Javascript") {
      console.log("select Javascript");
      aceEditor.session.setMode('ace/mode/javascript');
    }
    else if (selectedPl == "C/C++") {
      console.log("select c/c++");
      aceEditor.session.setMode('ace/mode/c_cpp');
    }

  });
</script>